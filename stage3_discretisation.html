import matplotlib.pyplot as plt
import numpy as np
from IPython.display import display, HTML
from ipywidgets import VBox, HBox, Layout, HTML as WHTML, Output

# --- Plot preparation ---
discretization_plot = Output()

with discretization_plot:
    # Parameters for plotting
    v0 = 25
    angle = np.radians(45)
    g = 9.8
    t_total = 2 * v0 * np.sin(angle) / g
    t_points = np.linspace(0, t_total, 7)  # 7 discrete time steps

    x = v0 * np.cos(angle) * t_points
    y = v0 * np.sin(angle) * t_points - 0.5 * g * t_points**2
    vx = v0 * np.cos(angle)
    vy = v0 * np.sin(angle) - g * t_points

    fig, ax = plt.subplots(figsize=(6, 4))
    ax.plot(x, y, 'k--', alpha=0.5, label='Full Trajectory')
    ax.scatter(x, y, color='teal', zorder=5)

    for i in range(len(x)):
        ax.arrow(x[i], y[i], 0.5 * vx, 0.5 * vy[i],
                 head_width=0.5, head_length=0.5, fc='orange', ec='orange')

    ax.set_title("Discretizing the Motion: Mass Points & Velocities")
    ax.set_xlabel("Horizontal Distance (m)")
    ax.set_ylabel("Vertical Height (m)")
    ax.set_xlim(0, max(x) + 5)
    ax.set_ylim(0, max(y) + 5)
    ax.grid(True)
    plt.tight_layout()
    plt.show()

# --- Text explanation ---
text_block = WHTML("""
<h2 style="color:#2a4d69;">Stage 3: Discretization</h2>
<p style="font-size:15px;">
In real-world physics, many systems are continuous — meaning they change smoothly in time and space. 
But to analyze or simulate them effectively, we <b>discretize</b> them: 
we break the motion or object into a set of small, manageable parts.
</p>

<p style="font-size:15px;">
For projectile motion, this means thinking of the path as a sequence of small steps or mass points, 
each with its own velocity vector. Instead of modeling the continuous curve directly, 
we work with snapshots of the motion at distinct times.
</p>

<p style="font-size:15px;">
Discretization helps us form a bridge to calculus (for deriving differential equations) 
or to numerical simulation (for computer models).
</p>
""")

# Layout in two columns
left_column = VBox([text_block], layout=Layout(width='50%'))
right_column = VBox([discretization_plot], layout=Layout(width='50%'))

display(HBox([left_column, right_column]))import matplotlib.pyplot as plt
import numpy as np
from IPython.display import display, HTML
from ipywidgets import VBox, HBox, Layout, HTML as WHTML, Output

# --- Plot preparation ---
discretization_plot = Output()

with discretization_plot:
    # Parameters for plotting
    v0 = 25
    angle = np.radians(45)
    g = 9.8
    t_total = 2 * v0 * np.sin(angle) / g
    t_points = np.linspace(0, t_total, 7)  # 7 discrete time steps

    x = v0 * np.cos(angle) * t_points
    y = v0 * np.sin(angle) * t_points - 0.5 * g * t_points**2
    vx = v0 * np.cos(angle)
    vy = v0 * np.sin(angle) - g * t_points

    fig, ax = plt.subplots(figsize=(6, 4))
    ax.plot(x, y, 'k--', alpha=0.5, label='Full Trajectory')
    ax.scatter(x, y, color='teal', zorder=5)

    for i in range(len(x)):
        ax.arrow(x[i], y[i], 0.5 * vx, 0.5 * vy[i],
                 head_width=0.5, head_length=0.5, fc='orange', ec='orange')

    ax.set_title("Discretizing the Motion: Mass Points & Velocities")
    ax.set_xlabel("Horizontal Distance (m)")
    ax.set_ylabel("Vertical Height (m)")
    ax.set_xlim(0, max(x) + 5)
    ax.set_ylim(0, max(y) + 5)
    ax.grid(True)
    plt.tight_layout()
    plt.show()

# --- Text explanation ---
text_block = WHTML("""
<h2 style="color:#2a4d69;">Stage 3: Discretization</h2>
<p style="font-size:15px;">
In real-world physics, many systems are continuous — meaning they change smoothly in time and space. 
But to analyze or simulate them effectively, we <b>discretize</b> them: 
we break the motion or object into a set of small, manageable parts.
</p>

<p style="font-size:15px;">
For projectile motion, this means thinking of the path as a sequence of small steps or mass points, 
each with its own velocity vector. Instead of modeling the continuous curve directly, 
we work with snapshots of the motion at distinct times.
</p>

<p style="font-size:15px;">
Discretization helps us form a bridge to calculus (for deriving differential equations) 
or to numerical simulation (for computer models).
</p>
""")

# Layout in two columns
left_column = VBox([text_block], layout=Layout(width='50%'))
right_column = VBox([discretization_plot], layout=Layout(width='50%'))

display(HBox([left_column, right_column]))